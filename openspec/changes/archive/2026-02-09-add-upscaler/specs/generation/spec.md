## MODIFIED Requirements

### Requirement: WebDataset Output
The system SHALL save generated images in WebDataset format (tar files).
**Reason:** To improve I/O performance and manage large numbers of files efficiently.
**Details:**
- Each shard should contain 1000 images.
- Images should be PNG format at 512×512 resolution (upscaled from 128×128).
- Metadata (seeds) should be JSON, including `upscaled: true` flag.

#### Scenario: Shard creation
- **WHEN** generation crosses a 1000-image boundary
- **THEN** a new tar file is created (e.g. `images-000000.tar`, `images-000001.tar`)
- **AND** each tar contains paired `.png` (512×512) and `.json` files

## ADDED Requirements

### Requirement: Upscale Before Save
The system SHALL upscale generated images from 128×128 to 512×512 before saving to WebDataset.
**Reason:** Higher resolution output is required for downstream tasks.

#### Scenario: Upscaling integration
- **WHEN** an image batch is generated by StyleGAN3
- **THEN** each image is upscaled using Real-ESRGAN
- **AND** the upscaled image (512×512) is saved to the WebDataset shard
